@{
    string key = "Asf_PRzBpUJVcb9lcAg48BLOuAuaBItg4ZzCqaNQaSIFReqieYA02KBcovVD08Jk";
}

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/litepicker/dist/litepicker.js"></script>
<script src="~/js/Bingmap/GetLocation.js" type="text/javascript"></script>
<script src='https://www.bing.com/api/maps/mapcontrol?callback=getSuggest&key=@key' type='text/javascript' async defer></script>
<script type="text/javascript">
    var suggest = null;
    var moduleSuggest = null;
    var manager = null;
    function onLoad() {
        var options = { maxResults: 5 };
        manager = new Microsoft.Maps.AutosuggestManager(options);
        manager.attachAutosuggest('#explore-input', '#container-explore', selectedSuggestion);
    }
    function onError(message) {
        suggest = null;
    }
    function selectedSuggestion(suggestionResult) {
        suggest = suggestionResult;
    }
    function stringToSlug(str) {
        // remove accents
        var from =  "àáãảạăằắẳẵặâầấẩẫậèéẻẽẹêềếểễệđùúủũụưừứửữựòóỏõọôồốổỗộơờớởỡợìíỉĩịäëïîöüûñçýỳỹỵỷ",
            to =    "aaaaaaaaaaaaaaaaaeeeeeeeeeeeduuuuuuuuuuuoooooooooooooooooiiiiiaeiiouuncyyyyy";
        for (var i = 0, l = from.length; i < l; i++) {
            str = str.replace(RegExp(from[i], "gi"), to[i]);
        }

        str = str.toLowerCase()
            .trim()
            .replace(/[^a-z0-9\-]/g, '-')
            .replace(/-+/g, '-');

        return str;
    }
    function includeIdCity() {
        if (suggest != null){
            for (e in dataLocation) {
                if (stringToSlug(suggest.address.adminDistrict).indexOf(stringToSlug(dataLocation[e].name)) != -1) {
                    return e;
                }
            }
        }
    }
    function getSuggest() {
        moduleSuggest = Microsoft.Maps.loadModule('Microsoft.Maps.AutoSuggest', {
            callback: onLoad,
            errorCallback: onError
        });
        if ($("#myMap").length > 0) {
            GetMap();
        }
    }
</script>
<script type="text/javascript">
    function explore() {
        if(window.location.href.indexOf("/Explore") == -1){

            if(suggest == null){
                window.location.href = "@Url.Action("Index", "Explore")?location=" + $("#explore-input").val();
            }
            else{
                window.location.href = "@Url.Action("Index", "Explore")?idCity=" + includeIdCity();
            }
        }
        else{
            search(1, 12);
        }
    }
</script>